
# 🏦 KOSPI Top 10 Equal-Weight Rebalancing Strategy

## 📖 프로그램 개요
KOSPI 시가총액 상위 10개 종목에 매월 적립식으로 투자하고, 매년 1회 리밸런싱하는 전략을 백테스팅하고 결과를 리포팅하는 프로그램입니다.

### ⚙️ 핵심 전략
1.  **투자 유니버스:** KOSPI 시가총액 상위 10개 종목 (매년 1월 재선정)
2.  **비중:** 동일 비중 (Equal Weight, 각 10%)
3.  **리밸런싱 주기:** 연 1회 (매년 1월 두 번째 월요일)
4.  **적립식 투자 (DCA):** 매월 100만 원 추가 투입 (매월 두 번째 월요일)
    - 리밸런싱 당월에는 리밸런싱과 거의 동시에 투입 효과
5.  **거래 수수료:** 매도 시 0.2%

> [!NOTE] **데이터 관련 사항**
> `pykrx` 라이브러리의 과거 시가총액 조회 오류로 인해, **연도별 실제 KOSPI 시가총액 상위 10개 종목을 수동으로 조사하여 반영**했습니다. (2016~2026년 Historical Data 사용)
> 이를 통해 생존 편향(Survivorship Bias)을 최소화하고 실제 과거 시장 상황(예: 아모레퍼시픽, 카카오 등의 진입/퇴출)을 반영했습니다.

---

## 🚀 실행 방법

### 1. 환경 설정 및 의존성 설치
Python 3.8+ 환경에서 필요한 라이브러리를 설치합니다.
```bash
pip install pandas numpy matplotlib pykrx
```

### 2. 백테스트 및 리포트 생성 실행
프로젝트 루트(`stock_research_bot`)에서 아래 명령어를 실행합니다.
```bash
python3 -m top10_rebalancing.main
```
또는
```bash
python3 top10_rebalancing/main.py
```

### 3. 결과 확인
실행이 완료되면 `stock_research_bot/top10_rebalancing/results` 폴더에 아래 파일들이 생성됩니다.
- 📄 **리포트:** `top10_report.md` (상세 성과 및 연도별 종목)
- 📈 **차트:** `images/top10_equity_curve.png` (수익률 곡선 비교)
- 💾 **데이터:** `top10_history.csv` (일자별 백테스트 상세 기록)

---

## 📊 백테스트 결과 요약 (2016-2026)

| 항목 | 전략 (Strategy) | 벤치마크 (KOSPI 200 DCA) |
| :--- | :--- | :--- |
| **최종 평가액** | **2.94억 원** | **3.33억 원** |
| **총 투자원금** | 1.21억 원 | 1.21억 원 |
| **순수익** | +1.73억 원 | +2.12억 원 |
| **총 수익률** | **+143.33%** | **+175.30%** |
| **MDD (최대낙폭)** | -33.55% | - |

> **분석:** 실제 과거 데이터를 반영한 결과, 전략 수익률이 벤치마크를 소폭 하회했습니다 (-32%p). 이는 과거 시가총액 상위권에 진입했던 일부 고평가 종목들(예: 2016년 아모레퍼시픽, 2021년 카카오 등)이 이후 하락세를 겪으며 포트폴리오 성과를 끌어내린 영향("승자의 저주")으로 분석됩니다.

---

## 📂 파일 구조
- `config.py`: 투자 금액, 수수료, 시작 연도 등 설정 파일
- `backtest.py`: 백테스트 로직 (Historical Top 10 데이터 내장)
- `report.py`: 성과 지표 계산 및 리포트/차트 생성
- `main.py`: 프로그램 실행 진입점 (Entry Point)
